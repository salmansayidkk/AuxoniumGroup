/* ===================================================================
   MULTI-LANGUAGE SUPPORT - ENGLISH / ARABIC
   RTL Support for Arabic Language
   =================================================================== */

const translations = {
  en: {
    // Navigation
    'nav.home': 'Home',
    'nav.services': 'Services',
    'nav.about': 'About',
    'nav.pricing': 'Pricing',
    'nav.contact': 'Contact',
    'nav.whatsapp': 'WhatsApp',
    'nav.getQuote': 'Get Quote',
    
    // Hero Section
    'hero.title': 'General Contracting Services',
    'hero.subtitle': 'IT, Electrical, AC Mechanics & Fitouts',
    'hero.description': 'From office infrastructure and cloud migration to AC mechanics, electrical works and fitouts. End-to-end delivery with rapid on-site support across all Emirates.',
    'hero.cta.primary': 'Get in Touch',
    'hero.cta.secondary': 'Explore Services',
    'hero.trust': 'Trusted by SMEs, startups, and enterprises across',
    
    // Services
    'services.title': 'Our Services',
    'services.subtitle': 'Comprehensive solutions for your business infrastructure needs',
    'services.electrical.title': 'Electrical Services',
    'services.electrical.desc': 'Professional electrical wiring, panel works, lighting, and 24/7 emergency services',
    'services.ac.title': 'AC Mechanics',
    'services.ac.desc': 'Installation, maintenance, and repair of air conditioning systems',
    'services.fitout.title': 'Fitout Services',
    'services.fitout.desc': 'Complete interior fitout from design to handover',
    'services.it.title': 'IT Services',
    'services.it.desc': 'Infrastructure, cloud solutions, and cybersecurity',
    'services.learnMore': 'Learn More',
    
    // Trust Indicators
    'trust.licensed': 'Licensed Contractor',
    'trust.licensed.desc': 'UAE DED Certified',
    'trust.response': '2-Hour Response',
    'trust.response.desc': 'All Emirates',
    'trust.warranty': '12-Month Warranty',
    'trust.warranty.desc': 'Parts & Labor',
    'trust.support': '24/7 Emergency',
    'trust.support.desc': 'Always Available',
    
    // Call to Action
    'cta.title': 'Ready to Start Your Project?',
    'cta.subtitle': 'Get a free consultation and quote',
    'cta.button': 'Request Quote',
    'cta.call': 'Or call:',
    
    // Footer
    'footer.services': 'Services',
    'footer.quickLinks': 'Quick Links',
    'footer.coverage': 'Coverage Areas',
    'footer.rights': 'All rights reserved',
    
    // Form
    'form.name': 'Your full name',
    'form.email': 'Your email address',
    'form.phone': 'Phone or WhatsApp',
    'form.service': 'Select service',
    'form.message': 'Tell us about your requirements...',
    'form.submit': 'Send Request',
    
    // Pricing Calculator
    'calc.title': 'Get Instant Quote',
    'calc.subtitle': 'Estimate your project cost in seconds',
    'calc.service': 'Service Type',
    'calc.size': 'Project Size',
    'calc.complexity': 'Project Complexity',
    'calc.location': 'Location',
    'calc.timeline': 'Timeline',
    'calc.calculate': 'Calculate Price',
    'calc.getQuote': 'Get Exact Quote',
    'calc.result': 'Estimated Cost',
    'calc.note': 'Final price may vary based on site inspection',
    
    // Common
    'common.online': "We're online",
    'common.ready': 'Ready to help!',
    'common.verified': 'Verified Customer',
    'common.justRequested': 'just requested',
    'common.ago': 'ago'
  },
  
  ar: {
    // Navigation
    'nav.home': 'الرئيسية',
    'nav.services': 'الخدمات',
    'nav.about': 'من نحن',
    'nav.pricing': 'الأسعار',
    'nav.contact': 'اتصل بنا',
    'nav.whatsapp': 'واتساب',
    'nav.getQuote': 'احصل على عرض',
    
    // Hero Section
    'hero.title': 'خدمات المقاولات العامة',
    'hero.subtitle': 'تكنولوجيا المعلومات، الكهرباء، أجهزة التكييف والتشطيبات',
    'hero.description': 'من البنية التحتية للمكاتب والهجرة السحابية إلى أعمال التكييف والكهرباء والتشطيبات. تسليم شامل مع دعم سريع في الموقع في جميع الإمارات.',
    'hero.cta.primary': 'تواصل معنا',
    'hero.cta.secondary': 'استكشف الخدمات',
    'hero.trust': 'موثوق به من قبل الشركات الصغيرة والمتوسطة والشركات الناشئة في جميع أنحاء',
    
    // Services
    'services.title': 'خدماتنا',
    'services.subtitle': 'حلول شاملة لاحتياجات البنية التحتية لأعمالك',
    'services.electrical.title': 'الخدمات الكهربائية',
    'services.electrical.desc': 'أعمال كهربائية احترافية، لوحات التحكم، الإضاءة، وخدمات الطوارئ على مدار الساعة',
    'services.ac.title': 'خدمات التكييف',
    'services.ac.desc': 'تركيب وصيانة وإصلاح أنظمة تكييف الهواء',
    'services.fitout.title': 'خدمات التشطيبات',
    'services.fitout.desc': 'تشطيبات داخلية كاملة من التصميم إلى التسليم',
    'services.it.title': 'خدمات تكنولوجيا المعلومات',
    'services.it.desc': 'البنية التحتية والحلول السحابية والأمن السيبراني',
    'services.learnMore': 'اعرف المزيد',
    
    // Trust Indicators
    'trust.licensed': 'مقاول مرخص',
    'trust.licensed.desc': 'معتمد من دائرة التنمية الاقتصادية',
    'trust.response': 'استجابة خلال ساعتين',
    'trust.response.desc': 'جميع الإمارات',
    'trust.warranty': 'ضمان 12 شهر',
    'trust.warranty.desc': 'قطع الغيار والعمل',
    'trust.support': 'طوارئ 24/7',
    'trust.support.desc': 'متاحون دائماً',
    
    // Call to Action
    'cta.title': 'هل أنت مستعد لبدء مشروعك؟',
    'cta.subtitle': 'احصل على استشارة وعرض سعر مجاني',
    'cta.button': 'طلب عرض سعر',
    'cta.call': 'أو اتصل:',
    
    // Footer
    'footer.services': 'الخدمات',
    'footer.quickLinks': 'روابط سريعة',
    'footer.coverage': 'مناطق التغطية',
    'footer.rights': 'جميع الحقوق محفوظة',
    
    // Form
    'form.name': 'الاسم الكامل',
    'form.email': 'عنوان البريد الإلكتروني',
    'form.phone': 'الهاتف أو واتساب',
    'form.service': 'اختر الخدمة',
    'form.message': 'أخبرنا عن متطلباتك...',
    'form.submit': 'إرسال الطلب',
    
    // Pricing Calculator
    'calc.title': 'احصل على عرض سعر فوري',
    'calc.subtitle': 'احسب تكلفة مشروعك في ثوانٍ',
    'calc.service': 'نوع الخدمة',
    'calc.size': 'حجم المشروع',
    'calc.complexity': 'تعقيد المشروع',
    'calc.location': 'الموقع',
    'calc.timeline': 'الجدول الزمني',
    'calc.calculate': 'احسب السعر',
    'calc.getQuote': 'احصل على عرض دقيق',
    'calc.result': 'التكلفة المقدرة',
    'calc.note': 'قد يختلف السعر النهائي بناءً على معاينة الموقع',
    
    // Common
    'common.online': 'نحن متصلون',
    'common.ready': 'جاهزون للمساعدة!',
    'common.verified': 'عميل موثق',
    'common.justRequested': 'طلب للتو',
    'common.ago': 'منذ'
  }
};

class LanguageManager {
  constructor() {
    this.currentLang = localStorage.getItem('language') || 'en';
    this.init();
  }
  
  init() {
    // Apply saved language on page load
    this.applyLanguage(this.currentLang);
    
    // Create language toggle if it doesn't exist
    this.createLanguageToggle();
  }
  
  createLanguageToggle() {
    const existingToggle = document.getElementById('language-toggle');
    if (existingToggle) return;
    
    const toggle = document.createElement('div');
    toggle.id = 'language-toggle';
    toggle.style.cssText = `
      position: fixed;
      top: 5rem;
      right: 1.5rem;
      z-index: 9996;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 999px;
      padding: 0.5rem;
      display: flex;
      gap: 0.25rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    `;
    
    toggle.innerHTML = `
      <button onclick="languageManager.setLanguage('en')" 
              id="lang-en"
              style="padding: 0.5rem 1rem; background: ${this.currentLang === 'en' ? 'rgba(14, 165, 233, 0.2)' : 'transparent'}; border: none; border-radius: 999px; color: ${this.currentLang === 'en' ? '#0ea5e9' : '#94a3b8'}; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.875rem;">
        EN
      </button>
      <button onclick="languageManager.setLanguage('ar')" 
              id="lang-ar"
              style="padding: 0.5rem 1rem; background: ${this.currentLang === 'ar' ? 'rgba(14, 165, 233, 0.2)' : 'transparent'}; border: none; border-radius: 999px; color: ${this.currentLang === 'ar' ? '#0ea5e9' : '#94a3b8'}; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.875rem;">
        عربي
      </button>
    `;
    
    document.body.appendChild(toggle);
  }
  
  setLanguage(lang) {
    if (lang !== 'en' && lang !== 'ar') return;
    
    this.currentLang = lang;
    localStorage.setItem('language', lang);
    this.applyLanguage(lang);
    
    // Update toggle button styles
    document.getElementById('lang-en').style.background = lang === 'en' ? 'rgba(14, 165, 233, 0.2)' : 'transparent';
    document.getElementById('lang-en').style.color = lang === 'en' ? '#0ea5e9' : '#94a3b8';
    document.getElementById('lang-ar').style.background = lang === 'ar' ? 'rgba(14, 165, 233, 0.2)' : 'transparent';
    document.getElementById('lang-ar').style.color = lang === 'ar' ? '#0ea5e9' : '#94a3b8';
  }
  
  applyLanguage(lang) {
    // Set document direction
    document.dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.lang = lang;
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
      const key = element.getAttribute('data-i18n');
      const translation = this.translate(key, lang);
      
      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
        element.placeholder = translation;
      } else {
        element.textContent = translation;
      }
    });
    
    // Apply RTL-specific styles for Arabic
    if (lang === 'ar') {
      this.applyRTLStyles();
    } else {
      this.removeRTLStyles();
    }
  }
  
  translate(key, lang = this.currentLang) {
    return translations[lang]?.[key] || translations.en[key] || key;
  }
  
  applyRTLStyles() {
    let rtlStyle = document.getElementById('rtl-styles');
    if (rtlStyle) return;
    
    rtlStyle = document.createElement('style');
    rtlStyle.id = 'rtl-styles';
    rtlStyle.textContent = `
      body[dir="rtl"] {
        font-family: 'Tajawal', 'Cairo', 'Segoe UI', Roboto, sans-serif;
      }
      
      body[dir="rtl"] .mobile-menu {
        left: -100%;
        right: auto;
      }
      
      body[dir="rtl"] .mobile-menu.active {
        left: 0;
      }
      
      body[dir="rtl"] .mobile-overlay {
        direction: rtl;
      }
      
      body[dir="rtl"] #social-proof-popup {
        left: auto;
        right: 1.5rem;
      }
      
      body[dir="rtl"] .chatbot-container {
        left: 1.5rem;
        right: auto;
      }
      
      body[dir="rtl"] .floating-cta {
        left: 1.5rem;
        right: auto;
      }
      
      body[dir="rtl"] #language-toggle {
        left: 1.5rem;
        right: auto;
      }
      
      /* Flip animations for RTL */
      @keyframes slideIn-rtl {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      
      @keyframes slideOut-rtl {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(100%);
        }
      }
      
      body[dir="rtl"] #social-proof-popup {
        animation: slideIn-rtl 0.5s ease forwards !important;
      }
    `;
    
    document.head.appendChild(rtlStyle);
    
    // Load Arabic fonts
    if (!document.getElementById('arabic-fonts')) {
      const link = document.createElement('link');
      link.id = 'arabic-fonts';
      link.rel = 'stylesheet';
      link.href = 'https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Cairo:wght@400;600;700;900&display=swap';
      document.head.appendChild(link);
    }
  }
  
  removeRTLStyles() {
    const rtlStyle = document.getElementById('rtl-styles');
    if (rtlStyle) {
      rtlStyle.remove();
    }
  }
}

// Initialize language manager globally
let languageManager;
document.addEventListener('DOMContentLoaded', () => {
  languageManager = new LanguageManager();
});

/* === USAGE EXAMPLE === 

Add data-i18n attribute to elements you want to translate:

HTML:
<h1 data-i18n="hero.title">General Contracting Services</h1>
<p data-i18n="hero.description">...</p>
<button data-i18n="hero.cta.primary">Get in Touch</button>
<input type="text" data-i18n="form.name" placeholder="Your full name">

The language manager will automatically translate these elements based on the selected language.

*/
